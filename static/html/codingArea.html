<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>Define Custom Formula</title>
		<script src="../kendoui/js/jquery.min.js"></script>
		<script src="../kendoui/js/jszip.min.js"></script>
		<script src="../kendoui/js/kendo.all.min.js"></script>
		<script src="../kendoui/examples/content/shared/js/console.js"></script>
		<script src="https://unpkg.com/codeflask/build/codeflask.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/static/css_temp/codingArea.css">
		<link href="../kendoui/examples/content/shared/styles/examples-offline.css" rel="stylesheet">
		<link href="../kendoui/styles/kendo.common.min.css" rel="stylesheet">
		<link href="../kendoui/styles/kendo.rtl.min.css" rel="stylesheet">
		<link href="../kendoui/styles/kendo.default.min.css" rel="stylesheet">
		<link href="../kendoui/styles/kendo.default.mobile.min.css" rel="stylesheet">
	</head>
	<body>
		<h1 id="header">Write your code here:</h1>
		<button type="button" id="submit">Submit</button>
		<button type="button" id="cancel">Cancel</button>
		<div id="code"></div>
		<script>
			$( document ).ready(function() {
				$("#submit").kendoButton();
				$("#cancel").kendoButton();
				var signature = window.opener.sharedObject['signature'];
				const flask = new CodeFlask('#code', {
					language: 'js',
					lineNumbers: true,
					ariaLabelledby: 'header',
					handleTabs: true
				});
				flask.updateCode(signature);
				$("#submit").click(function () {
					window.opener.sharedObject['code'] = flask.getCode();
					window.opener.closeCodingArea();
					window.close();
				});
				$("#cancel").click(function () {
					window.opener.sharedObject['code'] = null;
					window.opener.closeCodingArea();
					window.close();
				});
			});
		</script>
	</body>
</html>